<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Count Debug</title>
    <style>
        body { 
            font-family: monospace; 
            background: #1a1a2e; 
            color: white; 
            padding: 20px; 
        }
        .debug-section {
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 100, 200, 0.1);
            border-radius: 5px;
            border-left: 3px solid #0066cc;
        }
        .card-list {
            max-height: 400px;
            overflow-y: auto;
            background: #000;
            padding: 10px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    <h1>üîç Card Database Debug</h1>
    
    <div class="debug-section">
        <h3>Card Database Status</h3>
        <p id="cardStatus">Checking...</p>
    </div>
    
    <div class="debug-section">
        <h3>All Cards List</h3>
        <div id="cardList" class="card-list">Loading...</div>
    </div>
    
    <script type="module">
        import { EXTENDED_CARD_DATA } from './js/data/ExtendedCardDatabase.js';
        import { CardDatabase } from './js/core/CardDatabase.js';
        
        console.log('üîç Debug: Raw card data length:', EXTENDED_CARD_DATA.length);
        
        // Test card database
        const cardDB = new CardDatabase();
        cardDB.loadCards(EXTENDED_CARD_DATA);
        
        const allCards = cardDB.getAllCards();
        const cardArray = Array.from(allCards.values());
        
        console.log('üîç Debug: Loaded cards count:', cardArray.length);
        console.log('üîç Debug: First few cards:', cardArray.slice(0, 5));
        
        // Update status
        document.getElementById('cardStatus').innerHTML = `
            <strong>Raw Data:</strong> ${EXTENDED_CARD_DATA.length} cards<br>
            <strong>Loaded in DB:</strong> ${cardArray.length} cards<br>
            <strong>Database Total:</strong> ${cardDB.totalCards} cards
        `;
        
        // Show all cards
        const cardListHTML = cardArray.map((card, index) => 
            `${index + 1}. [${card.element}] ${card.name} (${card.type}) - ID: ${card.id}`
        ).join('<br>');
        
        document.getElementById('cardList').innerHTML = cardListHTML;
        
        // Group by element
        const elementCounts = {};
        cardArray.forEach(card => {
            elementCounts[card.element] = (elementCounts[card.element] || 0) + 1;
        });
        
        console.log('üîç Debug: Cards by element:', elementCounts);
        
        // Check if enough for deck building
        const maxDeckSize = Math.min(cardArray.length * 3, 50);
        console.log('üîç Debug: Maximum possible deck size:', maxDeckSize);
        
        if (maxDeckSize >= 50) {
            console.log('‚úÖ Enough cards for deck building!');
        } else {
            console.log('‚ùå Not enough cards for a 50-card deck');
            console.log(`Need at least ${Math.ceil(50/3)} unique cards, have ${cardArray.length}`);
        }
    </script>
</body>
</html>